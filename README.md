# ๐ ุงุณฺฉุฑูพุช ูุตุจ ุฎูุฏฺฉุงุฑ DoH Gateway & SmartDNS

ุงู ุงุณฺฉุฑูพุช ุชูุงู ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ ฺฉ **DoH Server** ุดุฎุต (DNS over HTTPS) ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ. ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ุงุณฺฉุฑูพุชุ ุดูุง ฺฉ DNS ุฑูุฒูฺฏุงุฑ ุดุฏู ู ุงูู ุฎูุงูุฏ ุฏุงุดุช ฺฉู ูโุชูุงูุฏ ุฏุฑ ฺฉูุงูุชโูุง v2ray (ูุซู v2rayNG ู v2rayNG ู v2box) ู ุญุช ูุฑูุฑฺฏุฑ ูุง ู ุฏูุงุณ ูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ูุดฺฉู ุงุชุตุงู ู ููุชุฑูฺฏ DNS ุฑุง ุญู ฺฉูุฏ.

---

### โจ ูฺฺฏโูุง
- โ **ูุตุจ ุฎูุฏฺฉุงุฑ SmartDNS** (ุจุฑุง ุณุฑุนุช ุจุงูุง ู ุจูููโุณุงุฒ ูุณุฑุงุจ)
- โ **ฺฉุงููฺฏ Nginx** ุจู ุนููุงู ุฏุฑูุงุฒู ุงูู (DoH Gateway)
- โ **ุฏุฑุงูุช ุฎูุฏฺฉุงุฑ SSL** ูุนุชุจุฑ (ุจุง ุงุณุชูุงุฏู ุงุฒ Acme.sh ู ZeroSSL)
- โ **ุฑูุน ุชุฏุงุฎู ูพูุฑุช 53** ุฏุฑ ุงูุจููุชู
- โ **ููู ูุฏุฑุช** (ูุตุจุ ุญุฐูุ ูุดุงูุฏู ูุงฺฏโูุง)

---

## ๐ฅ ุฑูุด ูุตุจ (ุณุฑุน)

ุจุฑุง ูุตุจุ ฺฉุงูุณุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุณุฑูุฑ ุฎูุฏ (ุจุง ุฏุณุชุฑุณ ุฑูุช) ฺฉูพ ู ุงุฌุฑุง ฺฉูุฏ:

```
bash <(curl -Ls https://raw.githubusercontent.com/iaghapour/DoH-SmartDNS-Nginx/refs/heads/main/setup.sh)
```


## ๐ก ูุงุฒููุฏโูุง

* ุณุฑูุฑ ูููฺฉุณ (ุชุณุช ุดุฏู ุฑู **Ubuntu 20.04 / 22.04**)
* ุฏุณุชุฑุณ **Root**
* ฺฉ ุฏุงููู ฺฉู ุฑู IP ุณุฑูุฑ ุชูุธู ุดุฏู ุจุงุดุฏ (A Record)
* ุจุงุฒ ุจูุฏู ูพูุฑุชโูุง **80** ู **443**

---

## ๐ฑ ุชูุธูุงุช ฺฉูุงูุช (Client Config)

ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ **v2box (ุงูุฏุฑูุฏ ู ุขููู)**ุ ู **v2rayN (ููุฏูุฒ)**ุ ุงุฒ ฺฉุฏ JSON ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ.

### ๐ก๏ธ ูฺฺฏโูุง ุงู ฺฉุงููฺฏ:

1. **ุณุงุฒฺฏุงุฑ ฺฉุงูู:** ุฏุงุฑุง ุจุฎุด `inbounds` ุจุฑุง ฺฉุงุฑฺฉุฑุฏ ุตุญุญ ุฏุฑ ุชูุงู ุณุณุชูโุนุงููโูุง.
2. **ุถุฏ ููุชุฑ:** ุฏุฑ ุจุฎุด `hosts` ุงุฒ ุขโูพ ุชูุฒ ฺฉููุฏููุฑ ุงุณุชูุงุฏู ุดุฏู ุชุง ุณุฑูุฑ ุงุตู ุดูุง ูุฎู ุจูุงูุฏ.

```json
{
  "remarks": "๐ก๏ธ iAghapour DoH Proxy",
  "log": {
    "loglevel": "warning"
  },
  "dns": {
    "hosts": {
      "YOUR-DOMAIN.COM": "162.159.36.1",
      "geosite:category-ads-all": "127.0.0.1"
    },
    "servers": [
      {
        "address": "https://YOUR-DOMAIN.COM/dns-query",
        "domains": [],
        "skipFallback": true
      },
      "1.1.1.1"
    ],
    "queryStrategy": "UseIPv4"
  },
  "inbounds": [
    {
      "port": 10808,
      "listen": "127.0.0.1",
      "protocol": "socks",
      "settings": {
        "auth": "noauth",
        "udp": true
      },
      "sniffing": {
        "enabled": true,
        "destOverride": [
          "http",
          "tls"
        ]
      }
    },
    {
      "port": 10809,
      "listen": "127.0.0.1",
      "protocol": "http",
      "settings": {},
      "sniffing": {
        "enabled": true,
        "destOverride": [
          "http",
          "tls"
        ]
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom",
      "settings": {
        "domainStrategy": "UseIP"
      },
      "tag": "direct"
    }
  ],
  "routing": {
    "domainStrategy": "IPIfNonMatch",
    "rules": [
      {
        "type": "field",
        "outboundTag": "direct",
        "network": "udp,tcp"
      }
    ]
  }
}

```

> ๐ **ุชูุฌู:** ุฏุฑ ฺฉุฏ ุจุงูุงุ ุญุชูุงู ุฌุง `YOUR-DOMAIN.COM` ูุงู ุฏุงููู ุฎูุฏุชุงู ุฑุง ุจููุณุฏ.

---

## โ๏ธ ูฺฉุงุช ููู (Cloudflare)

ุจุฑุง ุงูฺฉู ุณุฑูุฑ ุดูุง ููุชุฑ ูุดูุฏ ู ุงููุช ุจุงูุง ุฏุงุดุชู ุจุงุดุฏ:

1. ุฏุฑ ูพูู ฺฉููุฏููุฑุ ุญุชูุงู ุชฺฉ **Proxy (ุงุจุฑ ูุงุฑูุฌ)** ุฑุง ุฑูุดู ฺฉูุฏ.
2. ุฏุฑ ุจุฎุด **SSL/TLS** ฺฉููุฏููุฑุ ุญุงูุช ุฑุง ุฑู **Full (Strict)** ูุฑุงุฑ ุฏูุฏ.

---

## ๐ฅ ุขููุฒุด ฺฉุงูู ุชุตูุฑ

ูุฏู ฺฉุงูู ุขููุฒุด ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุงู ุงุณฺฉุฑูพุช ุฑุง ูโุชูุงูุฏ ุฏุฑ ฺฉุงูุงู ูู ุจุจูุฏ:

๐ [ููฺฉ ูุฏู ุฏุฑ ฺฉุงูุงู iAghapour](https://www.youtube.com/@iAghapour)

---

## โญ ุญูุงุช

ุงฺฏุฑ ุงู ุงุณฺฉุฑูพุช ุจุฑุง ุดูุง ููุฏ ุจูุฏุ ูุทูุงู ุจุง ุฒุฏู ุฏฺฉูู **Star (โญ๏ธ)** ุฏุฑ ุจุงูุง ุตูุญูุ ุงุฒ ูพุฑูฺู ุญูุงุช ฺฉูุฏ.

